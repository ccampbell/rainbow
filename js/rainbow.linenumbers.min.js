if(window.Rainbow&&!window.Rainbow.linenumbers){window.Rainbow.linenumbers=(function(b){var a=true,e=true,c,d;b.onHighlight(function(m){var o=parseInt,k=m.innerHTML.replace(/\r\n|\r/g,"\n").split("\n").length,v=m.getAttribute("data-line")<<0,x=k===0?1:(Math.log(k+v)/2.303<<0)+1,z=k,A=m.parentNode,q=A.nodeName=="PRE",l=function(i){return i.currentStyle||(document.defaultView&&document.defaultView.getComputedStyle(i,null))||i.style},p=l(m),B=l(A),r=o(B.paddingTop)+o(p.marginTop)+o(p.paddingTop),h=document.createElement("canvas"),C=h.getContext("2d"),u=document.createElement("canvas"),D=u.getContext("2d");if(isNaN(d)){var y=5,n=document.createElement("div"),g=n.style,j={font:p.font,width:"auto",display:"inline-block"};n.appendChild(document.createTextNode(new Array(1<<y).join("a")+"a"));for(var t in j){g[t]=j[t]}document.body.appendChild(n);d=n.offsetWidth>>y;c=o(p.lineHeight);if(isNaN(c)){c=n.offsetHeight}document.body.removeChild(n)}h.setAttribute("width",x*d);h.setAttribute("height",(1+k)*c);C.font=p.fontSize+" "+p.fontFamily;C.fillStyle=B.color;C.textBaseline="bottom";while(z--){var f=k-z;C.fillText((v+f-1)+"",0,f*c)}u.setAttribute("width",1);u.setAttribute("height",c);D.fillStyle=B.borderColor;D.fillRect(0,c-1,1,1);if(p.wordWrap!="normal"&&console&&console.warn){console.warn("rainbow.linenumbers: For correct linenumbers wordwrapping should be set to normal.")}if(q){var w=B.backgroundColor;if(e){w="url("+u.toDataURL()+") 0 "+r+"px,"+w}if(a){w="url("+h.toDataURL()+") "+d+"px "+r+"px no-repeat,"+w;A.style.paddingLeft=(parseInt(B.paddingLeft)+d*(x+1))+"px"}A.style.background=w}});return{toString:function(){return"[Object Rainbow.linenumbers]"}}})(window.Rainbow)};