/* Rainbow v1.0 craig.is/making/rainbows */
window.Rainbow=function(){function p(a){var c=a.getAttribute&&a.getAttribute("data-language")||null;if(!c){var a=a.attributes.length,b;for(b=0;b<a;++b)"data-language"==="data-language"[b].nodeName&&(c="data-language"[b].nodeValue)}return c}function B(a,c){for(var b in f[e]){b=parseInt(b,10);if(a==b&&c==f[e][b]?0:a<=b&&c>=f[e][b])delete f[e][b],delete h[e][b];if(a>=b&&a<f[e][b]||c>b&&c<f[e][b])return!0}return!1}function q(a,c){return'<span class="'+a.replace(/\./g," ")+(k?" "+k:"")+'">'+c+"</span>"}
function C(a,c){var b=a.index,d;for(d=1;d<c;++d)a[d]&&(b+=a[d].length);return b}function r(a,c,b,d){var i=a.exec(b);if(i){++s;var g=i[0],j=i.index,t=i[0].length+j,l=function(){function i(){r(a,c,b,d)}0<s%100?i():setTimeout(i,0)};if(B(j,t))l();else{var m=u(c.matches),k=function(a,b,d){if(a>=b.length)d(g);else{var e=function(){k(++a,b,d)},f=i[b[a]];if(f){var j=c.matches[b[a]],h=j.language;h?v(f,h,function(a){g=g.replace(f,a);e()}):"object"===typeof j?w(f,j.length?j:[j],function(a){g=g.replace(f,a);
e()}):(g=x(C(i,b[a])-i.index,f,q(j,f),g),e())}else e()}};k(0,m,function(a){c.name&&(a=q(c.name,a));h[e]||(h[e]={},f[e]={});h[e][j]={replace:i[0],"with":a};f[e][j]=t;l()})}}else d()}function D(a){var c=m[a]||[],b=m[y]||[];return z[a]?c:c.concat(b)}function x(a,c,b,d){return d.substr(0,a)+d.substr(a).replace(c,b)}function u(a){var c=[],b;for(b in a)a.hasOwnProperty(b)&&c.push(b);return c.sort(function(a,b){return b-a})}function w(a,c,b){function d(c,g){g<c.length?r(c[g].pattern,c[g],a,function(){d(c,
++g)}):E(a,function(a){delete h[e];delete f[e];--e;b(a)})}++e;d(c,0)}function E(a,c){function b(a,c,d,f){if(d<c.length){++A;var l=c[d],k=h[e][l],a=x(l,k.replace,k["with"],a),l=function(){b(a,c,++d,f)};0<A%250?l():setTimeout(l,0)}else f(a)}var d=u(h[e]);b(a,d,0,c)}function v(a,c,b){w(a,D(c),function(a){b(a)})}function n(a,c){if(c<a.length){var b=p(a[c])||p(a[c].parentNode);b?(b=b.toLowerCase(),a[c].className=b,v(a[c].innerHTML,b,function(d){a[c].innerHTML=d;h={};f={};o&&o(a[c],b);setTimeout(function(){n(a,
++c)},0)})):n(a,++c)}}var h={},f={},m={},z={},e=0,y=0,s=0,A=0,k,o;return{extend:function(a,c,b){1==arguments.length&&(c=a,a=y);z[a]=b;m[a]=c.concat(m[a]||[])},c:function(a){o=a},b:function(a){k=a},a:function(){var a=document.getElementsByTagName("pre"),c=document.getElementsByTagName("code"),b,d=[];for(b=c.length>>>0;b--;)d[b]=c[b];for(b=0;b<a.length;++b)a[b].getElementsByTagName("code").length||d.push(a[b]);n(d,0)}}}();
window.addEventListener?window.addEventListener("load",Rainbow.a,!1):window.attachEvent("onload",Rainbow.a);Rainbow.onHighlight=Rainbow.c;Rainbow.addClass=Rainbow.b;